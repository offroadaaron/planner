{% extends "base.html" %}
{% block content %}
<section class="card">
  <h1>Customers</h1>
  {% set values = form_values if form_values is defined else {} %}
  {% if form_error %}
  <p class="form-error">{{ form_error }}</p>
  {% endif %}
  <form method="post" action="/customers" class="grid">
    <input name="cust_code" placeholder="Cust Code" value="{{ values.get('cust_code', '') }}" required />
    <input name="name" placeholder="Customer Name" value="{{ values.get('name', '') }}" required />
    <input name="trade_name" placeholder="Trade Name" value="{{ values.get('trade_name', '') }}" />
    <input name="territory_name" placeholder="Territory (e.g. NSW (North))" value="{{ values.get('territory_name', '') }}" />
    <input name="group_name" placeholder="Group" value="{{ values.get('group_name', '') }}" />
    <input name="iws_code" placeholder="IWS Code" value="{{ values.get('iws_code', '') }}" />
    <button type="submit">Add Customer</button>
  </form>
</section>

<section class="card">
  <table>
    <thead>
      <tr>
        <th>Cust Code</th><th>Name</th><th>Trade Name</th><th>Territory</th><th>Group</th><th>IWS</th>
      </tr>
    </thead>
    <tbody>
      {% for c in customers %}
      <tr>
        <td>{{ c.cust_code }}</td>
        <td>{{ c.name }}</td>
        <td>{{ c.trade_name or "" }}</td>
        <td>{{ c.territory }}</td>
        <td>{{ c.group_name or "" }}</td>
        <td>{{ c.iws_code or "" }}</td>
      </tr>
      {% else %}
      <tr><td colspan="6">No customers yet.</td></tr>
      {% endfor %}
    </tbody>
  </table>
</section>
{% endblock %}
